<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <!-- bootstap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!-- vue.js -->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>    
    <script>
        function proceed(id, item_type) 
        {
            var form = document.createElement('form');
            form.setAttribute('method', 'post');
            form.setAttribute('action', '/admin/delete_item');
            form.style.display = 'hidden';
            var id_field = document.createElement("input");
            var item_type_field = document.createElement("input");
            id_field.type = "hidden";
            id_field.value = id;
            id_field.name = "id";
            item_type_field.type = "hidden";
            item_type_field.value = item_type;
            item_type_field.name = "item_type";
            form.appendChild(id_field);
            form.appendChild(item_type_field);
            document.body.appendChild(form)
            form.submit();
        }
    </script>
</head>
<body>
    <div>Current Item Type: {{ form.initial.item_type }}<br/>
    <form action="/admin/items" method="get">
	{{ form }}
	<input type="submit" value="Browse">
    </form>
    </div>
    <a href="/admin/add_item/{{ form.initial.item_type }}" class="btn btn-primary">Create new {{ form.initial.item_type }} item</a>
    <br/> <br/>
    <table class="table"> 
        <tr>
        {% for key,value in items.0.items %}
            <th>{{ key }}</th>
        {% endfor %}
        </tr>
        {% for item in items %}
            <tr>
            {% for key, value in item.items %}
                    <td>{{ value }}</td>
            {% endfor %}
                <td><a href="/admin/edit_item/{{ form.initial.item_type }}/{{ item.id }}">Edit</a></td>
                <td><button class="btn btn-primary" type="button" name="delete-item-button" onclick="if(confirm('Are you sure you want to delete this item?'))proceed({{ item.id }},'{{ form.initial.item_type }}')">Delete</button></td>
            </tr>
    {% endfor %}
    </table>
    <a href="{% url 'admin_landing' %}">Back</a>
</body>
</html>

<td>{{ property }}</td>
