<!DOCTYPE html>
<html lang="en">
<head>
    <script>
        function getTime(userID, year, month, day, hour, minute, second) {
            var GMTString = year + " " + month + " " + day + " " +        //Assemble time-related info into a string that JavaScript's Date
                            hour + ":" + minute + ":" + second + " GMT";  //variable accepts.
            var newDate = new Date(GMTString);                            //Initialize date in GMT. This allows JavaScript's Date feature
                                                                          //to keep the GMT time in mind as it automatically converts to client's time zone.
            var timeRow = document.getElementById("time" + userID);       //User ID ensures that all time-entries have a unique JavaScript ID.
            timeRow.innerHTML = newDate.toDateString() + " " + newDate.toLocaleTimeString();
        }
    </script>
</head>
<body>
    <table>
    	<tr>
    		<th>Email</th>
    		<th>User ID</th>
    		<th>First Name</th>
    		<th>Last Name</th>
    		<th>Phone Number</th>
    		<th>Address</th>
    		<th>Role</th>
            <th>Last Activity</th>
        {% for user in users %}
            <tr>
                <td>{{ user.email }}</td>
                <td>{{ user.user_id }}</td>
                <td>{{ user.f_name }}</td>
                <td>{{ user.l_name }}</td>
                <td>{{ user.phone_num }}</td>
                <td>{{ user.address }}</td>
                <td>{{ user.role_id }}</td>
                <td id="time{{ user.user_id }}"></td>
                <script type="text/javascript">
                    getTime('{{ user.user_id }}', '{{ user.last_visited.year }}',
                            '{{ user.last_visited.month }}', '{{ user.last_visited.day }}',
                            '{{ user.last_visited.hour }}', '{{ user.last_visited.minute }}',
                            '{{ user.last_visited.second }}');
                </script>
            </tr>
        {% endfor %}
    </table>
    <a href="{% url 'admin_landing' %}">Back</a>
</body>
</html>